(function(){function n(n,t,r){t=t||"";for(var i=[""],o=[],a=0;a<n.length;a++){o=[];for(var f=n[a].split(t),p=0;p<f.length;p++)for(var u=0;u<i.length;u++)o.push(i[u]+(i[u]?r:"")+f[p]);i=o}return e(i)}function t(n,t,e,r){var o=window.pinyinDictPolyphone,a=7,f=o[n];if(f){f=f.split(" ");for(var p=0;p<f.length;p++)t[p]=f[p]||t[p],r||(t[p]=i.removeTone(t[p]));return t.join(e)}for(p=0;p<n.length;p++){f="";for(var u=0;u<a&&p+u<n.length&&/^[\u2E80-\u9FFF]+$/.test(n[p+u]);u++){f+=n[p+u];var h=o[f];if(h){h=h.split(" ");for(var c=0;c<=u;c++)h[c]&&(t[p+c]=r?h[c]:i.removeTone(h[c]));break}}}for(p=0;p<t.length;p++)t[p]=t[p].replace(/ .*$/g,"");return t.join(e)}function e(n){for(var t=[],e={},r=0;r<n.length;r++){var i=typeof n[r]+n[r];e[i]||(t.push(n[r]),e[i]=!0)}return t}var r={},i={parseDict:function(){if(window.pinyinDictFirstletter&&(r.firstletter=window.pinyinDictFirstletter),window.pinyinDictNotone)for(var n in r.notone={},r.py2hz=window.pinyinDictNotone,window.pinyinDictNotone)for(var t=window.pinyinDictNotone[n],e=0,i=t.length;e<i;e++)r.notone[t[e]]||(r.notone[t[e]]=n)},getPinyin:function(e,i,o,a){if(!e||/^ +$/g.test(e))return"";i=void 0===i?" ":i,o=void 0===o||o,a=void 0!==a&&a;var f=[];if(r.withtone)for(var p=0,u=e.length;p<u;p++){var h=r.withtone[e[p]];h&&(a||(h=h.replace(/ .*$/g,"")),o||(h=this.removeTone(h))),f.push(h||e[p])}else{if(!r.notone)throw"抱歉，未找到合适的拼音字典文件！";o&&console.warn("pinyinDictNotone 字典文件不支持声调！"),a&&console.warn("pinyinDictNotone 字典文件不支持多音字！");var c="";for(p=0,u=e.length;p<u;p++){var l=e.charAt(p);h=r.notone[l];h?(c&&(f.push(c),c=""),f.push(h)):!l||/^ + $/g.test(l)?c&&(f.push(c),c=""):c+=l}c&&(f.push(c),c="")}return a?window.pinyinDictPolyphone?t(e,f,i,o):n(f," ",i):f.join(i)},getFirstLetter:function(t,i){if(i=void 0!==i&&i,!t||/^ +$/g.test(t))return"";if(r.firstletter){for(var o=[],a=0;a<t.length;a++){var f=t.charCodeAt(a),p=t.charAt(a);f>=19968&&f<=40869&&(p=r.firstletter.all.charAt(f-19968),i&&(p=r.firstletter.polyphone[f]||p)),o.push(p)}return i?n(o,"",""):o.join("")}var u=this.getPinyin(t," ",!1,i);u=u instanceof Array?u:[u];for(o=[],a=0;a<u.length;a++)o.push(u[a].replace(/(^| )(\w)\w*/g,function(n,t,e){return e.toUpperCase()}));return i?e(o):o[0]},getHanzi:function(n){if(!r.py2hz)throw"抱歉，未找到合适的拼音字典文件！";return r.py2hz[n]||""},removeTone:function(n){var t={"ā":"a1","á":"a2","ǎ":"a3","à":"a4","ō":"o1","ó":"o2","ǒ":"o3","ò":"o4","ē":"e1","é":"e2","ě":"e3","è":"e4","ī":"i1","í":"i2","ǐ":"i3","ì":"i4","ū":"u1","ú":"u2","ǔ":"u3","ù":"u4","ü":"v0","ǖ":"v1","ǘ":"v2","ǚ":"v3","ǜ":"v4","ń":"n2","ň":"n3","":"m2"};return n.replace(/[āáǎàōóǒòēéěèīíǐìūúǔùüǖǘǚǜńň]/g,function(n){return t[n][0]})}};i.parseDict(),i.dict=r,window.pinyinUtil=i})();